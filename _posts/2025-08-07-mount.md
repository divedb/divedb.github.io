---
date: 2025-08-07
layout: post
title: mount
categories: mount
tags: [Linux, mount] 
---

`Linux`ä¸­çš„`mount`å‘½ä»¤ç”¨äºå°†æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ°ç›®å½•æ ‘çš„æŒ‡å®šä½ç½®ï¼Œä½¿å­˜å‚¨è®¾å¤‡ï¼ˆå¦‚ç¡¬ç›˜ã€åˆ†åŒºã€ç½‘ç»œå­˜å‚¨ç­‰ï¼‰çš„å†…å®¹å¯è®¿é—®ã€‚ä»¥ä¸‹æ˜¯`mount`çš„æ ¸å¿ƒæ¦‚å¿µã€å¸¸ç”¨å‚æ•°åŠç¤ºä¾‹ï¼š

#### ğŸ§© 1. åŸºæœ¬è¯­æ³•

```bash
mount [-é€‰é¡¹] [è®¾å¤‡] [æŒ‚è½½ç‚¹]
```

-   è®¾å¤‡ï¼šå¦‚`/dev/sda1`ã€`UUID=xxxx`ã€ç½‘ç»œè·¯å¾„ï¼ˆ`NFS`/`CIFS`ï¼‰ã€‚
-   æŒ‚è½½ç‚¹ï¼šå¿…é¡»æ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„ç›®å½•ã€‚

#### ğŸ§© 2. å¸¸ç”¨æŒ‚è½½å‚æ•°

**å¸¸ç”¨é€‰é¡¹**

| å‚æ•°                | ä½œç”¨                                                         |
| :------------------ | :----------------------------------------------------------- |
| `-t <æ–‡ä»¶ç³»ç»Ÿç±»å‹>` | æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼ˆå¦‚`ext4`ã€`xfs`ã€`nfs`ã€`vfat`ã€`tmpfs`ï¼‰ã€‚ |
| `-o <é€‰é¡¹>`         | æŒ‚è½½é€‰é¡¹ï¼ˆå¤šä¸ªé€‰é¡¹ç”¨é€—å·åˆ†éš”ï¼‰ï¼Œè¯¦è§ä¸‹æ–‡ã€‚                   |
| `-a`                | æŒ‚è½½`/etc/fstab`ä¸­æ‰€æœ‰æœªæŒ‚è½½çš„è®¾å¤‡ã€‚                         |
| `-r`                | åªè¯»æŒ‚è½½ï¼ˆç­‰æ•ˆäº`-o ro`ï¼‰ã€‚                                  |
| `-w`                | è¯»å†™æŒ‚è½½ï¼ˆé»˜è®¤ï¼Œç­‰æ•ˆäº`-o rw`ï¼‰ã€‚                            |

`-o`çš„å¸¸ç”¨å­é€‰é¡¹

| é€‰é¡¹           | è¯´æ˜                                                         |
| :------------- | :----------------------------------------------------------- |
| `rw`/`ro`      | è¯»å†™/åªè¯»æ¨¡å¼ã€‚                                              |
| `noexec`       | ç¦æ­¢æ‰§è¡ŒæŒ‚è½½ç‚¹å†…çš„ç¨‹åºã€‚                                     |
| `nosuid`       | å¿½ç•¥æ–‡ä»¶çš„`SUID/SGID`æƒé™ä½ã€‚                                |
| `nodev`        | ä¸è§£æè®¾å¤‡æ–‡ä»¶ï¼ˆå¦‚`/dev`ä¸‹çš„æ–‡ä»¶ï¼‰ã€‚                         |
| `relatime`     | ä¼˜åŒ–è®¿é—®æ—¶é—´æ›´æ–°ï¼ˆå‡å°‘ç£ç›˜å†™å…¥ï¼‰ã€‚                           |
| `noatime`      | å®Œå…¨ä¸æ›´æ–°è®¿é—®æ—¶é—´ã€‚                                         |
| `sync`/`async` | åŒæ­¥/å¼‚æ­¥`I/O`ã€‚                                             |
| `user`         | å…è®¸æ™®é€šç”¨æˆ·æŒ‚è½½ï¼ˆéœ€åœ¨`/etc/fstab`ä¸­é…ç½®ï¼‰ã€‚                 |
| `defaults`     | ä½¿ç”¨é»˜è®¤é€‰é¡¹ï¼ˆ`rw,suid,dev,exec,auto,nouser,async,relatime`ï¼‰ã€‚ |
| `bind`         | ç»‘å®šæŒ‚è½½ï¼ˆå°†ä¸€ä¸ªç›®å½•æŒ‚è½½åˆ°å¦ä¸€ä¸ªä½ç½®ï¼‰ã€‚                     |
| `remount`      | é‡æ–°æŒ‚è½½ï¼ˆä¿®æ”¹é€‰é¡¹è€Œæ— éœ€å¸è½½ï¼‰ã€‚                             |

#### ğŸ§© 3. ç¤ºä¾‹

**æŒ‚è½½æœ¬åœ°ç£ç›˜**

```bash
# æŒ‚è½½ext4åˆ†åŒºåˆ°/mnt/data
$ sudo mount /dev/sdb1 /mnt/data -t ext4 -o rw,noatime

# é€šè¿‡UUIDæŒ‚è½½ï¼ˆé¿å…è®¾å¤‡åå˜åŒ–ï¼‰
$ sudo mount UUID=1234-5678 /mnt/usb -t vfat
```

**æŒ‚è½½ç½‘ç»œå­˜å‚¨**

```bash
# NFSæŒ‚è½½
$ sudo mount -t nfs 192.168.1.100:/share /mnt/nfs -o vers=4

# SMB/CIFSæŒ‚è½½
$ sudo mount -t cifs //server/share /mnt/smb -o username=user,password=pass
```

**ç»‘å®šæŒ‚è½½ï¼ˆç›®å½•æ˜ å°„ï¼‰**

```bash
# å°†/var/wwwæŒ‚è½½åˆ° /home/user/www
$ sudo mount --bind /var/www /home/user/www

# é€’å½’ç»‘å®šï¼ˆå­ç›®å½•ä¹Ÿç”Ÿæ•ˆï¼‰
$ sudo mount --rbind /olddir /newdir
```

**ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿ**

```bash
# æŒ‚è½½2GBå†…å­˜åˆ°/tmp/ramdisk
$ sudo mount -t tmpfs -o size=2G tmpfs /tmp/ramdisk
```

**é‡æ–°æŒ‚è½½ï¼ˆä¿®æ”¹é€‰é¡¹ï¼‰**

```bash
# å°†/æ–‡ä»¶ç³»ç»Ÿæ”¹ä¸ºåªè¯»
$ sudo mount -o remount,ro /

# é‡æ–°æŒ‚è½½å¹¶å¯ç”¨noexec
$ sudo mount -o remount,noexec /mnt
```

#### ğŸ§© 4. æ°¸ä¹…æŒ‚è½½ï¼ˆ`/etc/fstab`ï¼‰

ç¼–è¾‘`/etc/fstab`æ–‡ä»¶å¯å®ç°å¼€æœºè‡ªåŠ¨æŒ‚è½½ï¼Œæ¯è¡Œæ ¼å¼å¦‚ä¸‹ï¼š

```bash
<è®¾å¤‡>  <æŒ‚è½½ç‚¹>  <æ–‡ä»¶ç³»ç»Ÿ>  <é€‰é¡¹>  <dumpå¤‡ä»½>  <fsckæ£€æŸ¥é¡ºåº>
```

**ç¤ºä¾‹**ï¼š

```bash
UUID=1234-5678  /mnt/data  ext4  defaults,noatime  0  2
//server/share /mnt/smb    cifs  username=user,password=pass 0 0
```

#### ğŸ§© **5. å¸è½½å‘½ä»¤**

```bash
$ umount /mnt/data    # é€šè¿‡æŒ‚è½½ç‚¹å¸è½½
$ umount /dev/sdb1    # é€šè¿‡è®¾å¤‡å¸è½½
$ umount -l /mnt/data # æ‡’å¸è½½ï¼ˆå»¶è¿Ÿå¸è½½ï¼Œå½“ä¸å†ç¹å¿™æ—¶ï¼‰
```

#### ğŸ§© 6. æŸ¥çœ‹å·²æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿ

```bash
$ mount               # æ˜¾ç¤ºæ‰€æœ‰æŒ‚è½½ç‚¹
$ mount | grep /mnt   # è¿‡æ»¤ç‰¹å®šæŒ‚è½½ç‚¹
$ cat /proc/mounts    # å†…æ ¸è®°å½•çš„æŒ‚è½½ä¿¡æ¯
```

#### â—æ³¨æ„äº‹é¡¹

1.  **æƒé™**ï¼šæŒ‚è½½é€šå¸¸éœ€è¦`root`æƒé™ï¼ˆé™¤éé…ç½®äº†`user`é€‰é¡¹ï¼‰ã€‚
2.  **ä¾èµ–å·¥å…·**ï¼šéƒ¨åˆ†æ–‡ä»¶ç³»ç»Ÿéœ€é¢å¤–å·¥å…·åŒ…ï¼ˆå¦‚`nfs-utils`ã€`cifs-utils`ï¼‰ã€‚
3.  **å®‰å…¨**ï¼šé¿å…ç›´æ¥æŒ‚è½½ä¸å¯ä¿¡è®¾å¤‡ï¼ˆå¯ç”¨`noexec,nosuid,nodev` é™åˆ¶ï¼‰ã€‚
4.  **å¸è½½å‰**ï¼šç¡®ä¿æ²¡æœ‰è¿›ç¨‹æ­£åœ¨ä½¿ç”¨æŒ‚è½½ç‚¹ï¼ˆ`lsof /mnt`å¯æŸ¥çœ‹å ç”¨è¿›ç¨‹ï¼‰ã€‚
